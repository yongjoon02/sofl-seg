# MedSegDiff Flow vs. Baselines: Best Sample Analysis

## 분석 결과 요약

**전체 46개 샘플 중 41개(89%)에서 MedSegDiff Flow가 타 모델 대비 우수한 성능**

---

## 🏆 최종 추천: Sample 0012

### 정량적 지표 비교

| Model | Dice ↑ | clDice ↑ | Betti-1 Error ↓ | 특징 |
|-------|--------|----------|-----------------|------|
| **DSCNet** | 0.8578 | 0.8513 | **149** | 높은 위상 에러 |
| **MedSegDiff** | 0.8169 | 0.8128 | **99** | 전반적 성능 저하 |
| **MedSegDiff Flow** | **0.8673** | **0.8828** | **41** | **모든 지표 우수** |

### 정성적 특징 분석

```
False Positive/Negative 비교:
- DSCNet:         TP=12175, FP=1170, FN=2866, Area=0.887
- MedSegDiff:     TP=11811, FP=2066, FN=3230, Area=0.923
- MedSegDiff Flow: TP=12329, FP=1060, FN=2712, Area=0.890 ✓ 최소 FP
```

**Flow의 우수성:**
1. **False Positive 최소화**: 1060 (DSCNet 대비 9% 감소)
2. **True Positive 최대화**: 12329 (가장 많은 혈관 검출)
3. **위상 에러 72% 감소**: Betti-1 149→41 (혈관 연결성 대폭 개선)
4. **Area ratio 최적**: 0.890 (GT에 가장 근접)

### 선정 이유
- ✅ **균형잡힌 고성능**: Dice와 clDice 모두 최고
- ✅ **위상 보존 탁월**: Betti-1 에러를 1/3 수준으로 감소
- ✅ **False Positive 억제**: 불필요한 검출 최소화
- ✅ **실용적 적용성**: 중간 난이도 샘플로 일반화 가능성 높음

---

## 대안 샘플들

### 🥈 Sample 0041 - 최고 절대 성능
- **Dice**: 0.8943 (전체 최고)
- **clDice**: 0.9138 (연결성 탁월)
- **Betti-1**: 248→75→40 (극적 개선)
- **추천 사유**: 높은 절대 성능, 복잡한 혈관 구조

### 🥉 Sample 0015 - 최대 상대 개선
- **Dice 개선**: +0.0451 (베이스라인 대비 6.5% 향상)
- **clDice 개선**: +0.0925 (13.4% 향상)
- **Betti-1 개선**: 109→38 (65% 감소)
- **추천 사유**: 어려운 케이스에서의 robustness 증명

### 🏅 Sample 0007 - 복잡도 처리
- **Betti-1**: 300→178→137 (대규모 위상 에러 존재)
- **FP 감소**: 3055→1878 (38% 감소)
- **추천 사유**: 복잡한 케이스에서 FP 억제 능력

---

## Top 15 전체 리스트

| Rank | Sample | Composite Score | Dice (Flow) | clDice (Flow) | Betti-1 (Flow) | 주요 특징 |
|------|--------|-----------------|-------------|---------------|----------------|-----------|
| 1 | 0015 | 6.275 | 0.7415 | 0.7831 | 38 | 최대 상대 개선 |
| 2 | 0012 | 6.210 | 0.8673 | 0.8828 | 41 | **★ 추천** |
| 3 | 0007 | 4.831 | 0.8703 | 0.8561 | 137 | 복잡도 처리 |
| 4 | 0041 | 4.056 | 0.8943 | 0.9138 | 40 | 최고 절대 성능 |
| 5 | 0014 | 4.045 | 0.7330 | 0.8090 | 52 | 도전적 케이스 |
| 6 | 0004 | 4.006 | 0.8950 | 0.8791 | 4 | 위상 완벽 |
| 7 | 0008 | 3.187 | 0.8911 | 0.8788 | 37 | 안정적 성능 |
| 8 | 0027 | 3.097 | 0.8680 | 0.8902 | 9 | 위상 우수 |
| 9 | 0006 | 2.674 | 0.8796 | 0.8471 | 51 | 균형잡힌 개선 |
| 10 | 0020 | 2.536 | 0.7898 | 0.7094 | 62 | 저성능→중성능 |
| 11 | 0040 | 2.518 | 0.8876 | 0.9187 | 20 | 연결성 탁월 |
| 12 | 0044 | 2.476 | 0.8879 | 0.9195 | 0 | 위상 완벽 |
| 13 | 0002 | 2.287 | 0.8757 | 0.8949 | 9 | 위상 우수 |
| 14 | 0013 | 1.959 | 0.8701 | 0.8810 | 9 | 위상 우수 |
| 15 | 0039 | 1.895 | 0.8447 | 0.8512 | 21 | 안정적 개선 |

---

## 시각화 경로

**MedSegDiff Flow (추천 모델)**:
- `results/evaluation/medsegdiff_flow/medsegdiff_flow_xca_20260131_174749/predictions/0012/`

**비교 모델들**:
- DSCNet: `results/evaluation/dscnet/dscnet_xca_20260113_165256/predictions/0012/`
- MedSegDiff: `results/evaluation/medsegdiff/medsegdiff_xca_20260115_173945/predictions/0012/`

각 폴더 내용:
- `image.png` - 입력 이미지
- `label.png` - Ground Truth
- `prediction.png` - 모델 예측

---

## 결론

**Sample 0012**는 정량적, 정성적으로 MedSegDiff Flow의 우수성을 가장 잘 보여주는 샘플입니다:
1. 높은 절대 성능 (Dice 0.8673, clDice 0.8828)
2. 극적인 위상 개선 (Betti-1 에러 72% 감소)
3. False Positive 최소화 (정밀한 혈관 검출)
4. 실용적 적용 가능성 (중간 난이도, 일반화 능력)

논문 figure나 발표 자료에 사용하기 최적의 샘플입니다.
